<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Cultivo Cannabis Indoor - GrowCalculator</title>
    <style>
        :root {
            --green-dark: #2D5016;
            --green-darker: #1B4332;
            --green-medium: #40916C;
            --green-light: #52B788;
            --yellow-accent: #F59E0B;
            --yellow-accent-alt: #FF8500;
            --white: #FFFFFF;
            --gray-dark: #2D3748;
            --green-very-dark: #1A1A1A;
            --green-soft: #D8F3DC;
            --yellow-soft: #FFF3CD;
            --ocre-bg: #FFE5B4;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--ocre-bg);
            min-height: 100vh;
            padding: 20px;
            color: var(--gray-dark);
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        .quiz-header {
            text-align: center;
            color: var(--white);
            margin-bottom: 2rem;
        }
        .quiz-title {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(45,80,22,0.10);
            color: var(--white);
        }
        .quiz-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1rem;
            color: var(--gray-dark);
        }
        .quiz-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .quiz-card {
            background: rgba(255,255,255,0.7);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(139,92,246,0.10);
            border: 3px solid transparent;
            backdrop-filter: blur(8px);
        }
        .quiz-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 15px 40px rgba(34,197,94,0.15);
            border-color: var(--yellow-accent);
        }
        .quiz-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }
        .quiz-card h3 {
            font-size: 1.6rem;
            margin-bottom: 1rem;
            color: var(--yellow-accent);
            text-shadow: 0 1px 2px rgba(0,0,0,0.07);
        }
        .quiz-card.bg-light h3 {
            color: #111;
        }
        .quiz-card p {
            color: var(--gray-dark);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }
        .quiz-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray-dark);
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }
        .difficulty {
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            color: white;
            font-size: 0.8rem;
        }
        .difficulty.principiante { background: var(--green-light); color: var(--green-dark); }
        .difficulty.intermedio { background: var(--green-medium); color: var(--white); }
        .difficulty.avanzado { background: var(--yellow-accent); color: var(--green-dark); }
        .difficulty.experto { background: var(--green-dark); color: var(--white); }
        .quiz-container {
            background: rgba(255,255,255,0.7);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 20px 50px rgba(139,92,246,0.10);
            display: none;
            backdrop-filter: blur(10px);
        }
        .quiz-info {
            background: var(--green-soft);
            border-left: 4px solid var(--green-medium);
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 5px;
            color: var(--gray-dark);
        }
        .quiz-progress {
            background: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            margin-bottom: 2rem;
            overflow: hidden;
        }
        .progress-bar {
            background: linear-gradient(45deg, var(--green-light), var(--yellow-accent));
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }
        .question-counter {
            text-align: center;
            color: var(--gray-dark);
            margin-bottom: 1rem;
            font-weight: bold;
        }
        .question {
            font-size: 1.4rem;
            margin-bottom: 2rem;
            color: var(--gray-dark);
            line-height: 1.6;
            font-weight: 600;
        }
        .question-image {
            width: 100%;
            max-width: 400px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 1rem auto;
            display: block;
        }
        .answers {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .answer {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-size: 1.1rem;
            color: var(--gray-dark);
        }
        .answer:hover {
            background: var(--green-light);
            border-color: var(--yellow-accent);
            color: var(--green-dark);
        }
        .answer.selected {
            background: var(--green-medium);
            color: var(--white);
            border-color: var(--green-medium);
        }
        .answer.correct {
            background: var(--green-light);
            color: var(--green-dark);
            border-color: var(--green-light);
        }
        .answer.incorrect {
            background: #ef4444;
            color: var(--white);
            border-color: #ef4444;
        }
        .explanation {
            background: var(--green-soft);
            border-left: 4px solid var(--green-medium);
            padding: 1.2rem;
            margin: 1rem 0;
            border-radius: 8px;
            display: none;
            font-style: italic;
            color: var(--gray-dark);
        }
        .quiz-buttons {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
        }
        .btn {
            padding: 1.2rem 2rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            flex: 1;
        }
        .btn-primary {
            background: var(--yellow-accent);
            color: var(--green-dark);
        }
        .btn-primary:hover {
            background: var(--green-light);
            color: var(--white);
        }
        .btn-secondary {
            background: var(--yellow-accent-alt);
            color: var(--green-dark);
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .results {
            text-align: center;
            display: none;
        }
        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            position: relative;
            box-shadow: 0 10px 30px rgba(139,92,246,0.10);
        }
        .score-circle.score-excellent {
            background: linear-gradient(45deg, var(--green-light), var(--yellow-accent));
            color: var(--green-dark);
        }
        .score-circle.score-good {
            background: linear-gradient(45deg, var(--green-medium), var(--yellow-accent));
            color: var(--white);
        }
        .score-circle.score-average {
            background: linear-gradient(45deg, var(--yellow-accent), var(--green-soft));
            color: var(--green-dark);
        }
        .score-circle.score-poor {
            background: linear-gradient(45deg, #ef4444, var(--yellow-accent));
            color: var(--white);
        }
        .results h2 {
            color: var(--white);
            margin-bottom: 1rem;
            font-size: 2rem;
        }
        .results p {
            color: var(--gray-dark);
            margin-bottom: 2rem;
            font-size: 1.2rem;
        }
        .recommendations {
            background: #fff;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: left;
            border: 2px solid #e9ecef;
            color: var(--gray-dark);
        }
        .recommendations h3 {
            color: var(--green-light);
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
        }
        .recommendations ul {
            color: var(--gray-dark);
            padding-left: 1.5rem;
        }
        .recommendations li {
            margin-bottom: 0.8rem;
            line-height: 1.5;
        }
        .share-results {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .share-btn {
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            color: white;
            font-weight: bold;
            transition: transform 0.3s ease;
        }
        .share-btn:hover {
            transform: translateY(-2px);
        }
        .share-twitter { background: var(--yellow-accent); }
        .share-linkedin { background: #0077b5; }
        .share-facebook { background: var(--green-light); }
        .share-whatsapp { background: var(--green-light); }
        .back-btn {
            background: transparent;
            color: var(--yellow-accent);
            border: 2px solid var(--yellow-accent);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            margin-bottom: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .back-btn:hover {
            background: var(--yellow-accent);
            color: var(--green-dark);
        }
        @media (max-width: 768px) {
            .quiz-title {
                font-size: 2rem;
            }
            .quiz-selection {
                grid-template-columns: 1fr;
            }
            .quiz-buttons {
                flex-direction: column;
            }
            .share-results {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="quiz-header">
            <h1 class="quiz-title">üå± Quiz de Cultivo Indoor</h1>
            <p class="quiz-subtitle">Pon a prueba tus conocimientos sobre cultivo de cannabis indoor</p>
        </div>

        <!-- Selecci√≥n de Quiz -->
        <div id="quizSelection" class="quiz-selection">
            <div class="quiz-card" onclick="startQuiz('principiante')">
                <div class="quiz-icon">üå±</div>
                <h3>Principiante</h3>
                <p>Conceptos b√°sicos: germinaci√≥n, primeros pasos, equipamiento b√°sico y cuidados iniciales.</p>
                <div class="quiz-meta">
                    <span class="difficulty principiante">Principiante</span>
                    <span>10 preguntas</span>
                </div>
            </div>

            <div class="quiz-card" onclick="startQuiz('intermedio')">
                <div class="quiz-icon">ü™¥</div>
                <h3>Intermedio</h3>
                <p>Nutrici√≥n, iluminaci√≥n, control ambiental, poda y t√©cnicas de entrenamiento.</p>
                <div class="quiz-meta">
                    <span class="difficulty intermedio">Intermedio</span>
                    <span>12 preguntas</span>
                </div>
            </div>

            <div class="quiz-card" onclick="startQuiz('avanzado')">
                <div class="quiz-icon">üåø</div>
                <h3>Avanzado</h3>
                <p>Gen√©tica, breeding, sistemas hidrop√≥nicos, control de plagas y enfermedades.</p>
                <div class="quiz-meta">
                    <span class="difficulty avanzado">Avanzado</span>
                    <span>15 preguntas</span>
                </div>
            </div>

            <div class="quiz-card" onclick="startQuiz('experto')">
                <div class="quiz-icon">üèÜ</div>
                <h3>Experto Grower</h3>
                <p>T√©cnicas avanzadas, optimizaci√≥n m√°xima, troubleshooting y cultivo comercial.</p>
                <div class="quiz-meta">
                    <span class="difficulty experto">Experto</span>
                    <span>20 preguntas</span>
                </div>
            </div>
        </div>

        <!-- Contenedor del Quiz -->
        <div id="quizContainer" class="quiz-container">
            <button class="back-btn" onclick="backToSelection()">‚Üê Volver a selecci√≥n</button>
            
            <div class="quiz-info">
                <strong>üí° Tip:</strong> Lee cada pregunta cuidadosamente. Algunas tienen trucos comunes que cometen los cultivadores.
            </div>

            <div class="quiz-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div class="question-counter" id="questionCounter"></div>
            <div class="question" id="question"></div>
            <div class="answers" id="answers"></div>
            <div class="explanation" id="explanation"></div>

            <div class="quiz-buttons">
                <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" disabled>Anterior</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Siguiente</button>
            </div>
        </div>

        <!-- Resultados -->
        <div id="results" class="results">
            <div class="score-circle" id="scoreCircle">
                <span id="scoreText"></span>
            </div>
            <h2 id="resultTitle"></h2>
            <p id="resultDescription"></p>
            
            <div class="recommendations" id="recommendations"></div>

            <div class="share-results">
                <a href="#" class="share-btn share-twitter" id="shareTwitter" target="_blank">üì± Twitter</a>
                <a href="#" class="share-btn share-facebook" id="shareFacebook" target="_blank">üìò Facebook</a>
                <a href="#" class="share-btn share-whatsapp" id="shareWhatsapp" target="_blank">üí¨ WhatsApp</a>
            </div>

            <div style="margin-top: 2rem;">
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Repetir Quiz</button>
                <button class="btn btn-secondary" onclick="backToSelection()" style="margin-left: 1rem;">üìö Otros Quiz</button>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de preguntas por nivel
        const quizData = {
            principiante: [
                {
                    question: "¬øCu√°l es la temperatura ideal para la germinaci√≥n de semillas de cannabis?",
                    answers: ["18-20¬∞C", "22-26¬∞C", "28-32¬∞C", "15-18¬∞C"],
                    correct: 1,
                    explanation: "La temperatura √≥ptima para germinaci√≥n es 22-26¬∞C. Temperaturas m√°s bajas ralentizan el proceso, mientras que temperaturas m√°s altas pueden da√±ar las semillas."
                },
                {
                    question: "¬øCu√°ntas horas de luz necesita una planta en fase vegetativa?",
                    answers: ["12 horas", "16 horas", "18-24 horas", "8 horas"],
                    correct: 2,
                    explanation: "En vegetativo se recomienda 18-24 horas de luz. Muchos cultivadores usan 18/6 (18h luz, 6h oscuridad) para dar un descanso a las plantas y equipos."
                },
                {
                    question: "¬øQu√© significa NPK en los fertilizantes?",
                    answers: ["Nitr√≥geno, Potasio, Calcio", "Nitr√≥geno, F√≥sforo, Potasio", "Nitr√≥geno, F√≥sforo, Calcio", "Nicotina, F√≥sforo, Potasio"],
                    correct: 1,
                    explanation: "NPK representa los tres macronutrientes principales: Nitr√≥geno (N), F√≥sforo (P) y Potasio (K). Son esenciales para el crecimiento saludable."
                },
                {
                    question: "¬øCu√°l es la humedad relativa ideal en vegetativo?",
                    answers: ["30-40%", "50-70%", "80-90%", "20-30%"],
                    correct: 1,
                    explanation: "En vegetativo, la humedad ideal es 50-70%. Humedad muy alta puede causar hongos, muy baja puede estresar las plantas."
                },
                {
                    question: "¬øQu√© pH es √≥ptimo para cultivo en tierra?",
                    answers: ["5.5-6.0", "6.0-7.0", "7.5-8.0", "4.0-5.0"],
                    correct: 1,
                    explanation: "En tierra, el pH √≥ptimo es 6.0-7.0. Este rango permite la mejor absorci√≥n de nutrientes por las ra√≠ces."
                },
                {
                    question: "¬øCu√°ndo cambiar el fotoperiodo a floraci√≥n?",
                    answers: ["8/16 horas luz/oscuridad", "12/12 horas luz/oscuridad", "14/10 horas luz/oscuridad", "16/8 horas luz/oscuridad"],
                    correct: 1,
                    explanation: "Para inducir floraci√≥n se cambia a 12/12 (12h luz, 12h oscuridad). Este cambio simula el oto√±o natural."
                },
                {
                    question: "¬øQu√© tipo de luz es mejor para vegetativo?",
                    answers: ["Luz roja (2700K)", "Luz azul (6500K)", "Luz amarilla (3000K)", "Luz verde (5000K)"],
                    correct: 1,
                    explanation: "La luz azul (6500K) es ideal para vegetativo porque promueve crecimiento compacto y desarrollo de hojas."
                },
                {
                    question: "¬øCon qu√© frecuencia regar plantas j√≥venes?",
                    answers: ["Diariamente", "Cuando la tierra est√© seca 2-3cm", "Una vez por semana", "Cada 3 d√≠as exactos"],
                    correct: 1,
                    explanation: "Riega cuando los primeros 2-3cm de tierra est√©n secos. El exceso de riego es m√°s peligroso que la falta de agua."
                },
                {
                    question: "¬øCu√°l es el primer signo de sobrefertilizaci√≥n?",
                    answers: ["Hojas amarillas", "Puntas de hojas quemadas", "Crecimiento lento", "Hojas moradas"],
                    correct: 1,
                    explanation: "Las puntas quemadas (marr√≥n/amarillo) son el primer signo de sobrefertilizaci√≥n. Reduce inmediatamente los nutrientes."
                },
                {
                    question: "¬øQu√© tama√±o de maceta para una planta auto?",
                    answers: ["1-3 litros", "5-7 litros", "10-15 litros", "20+ litros"],
                    correct: 1,
                    explanation: "Las autos necesitan 5-7 litros m√≠nimo. Macetas peque√±as limitan el crecimiento y rendimiento final."
                }
            ],
            intermedio: [
                {
                    question: "¬øCu√°l es la diferencia entre LST y HST?",
                    answers: ["LST es para vegetativo, HST para floraci√≥n", "LST no da√±a la planta, HST s√≠", "No hay diferencia", "LST es m√°s efectivo"],
                    correct: 1,
                    explanation: "LST (Low Stress Training) no da√±a la planta, solo la dobla. HST (High Stress Training) implica cortes o da√±os controlados como topping, FIM, etc."
                },
                {
                    question: "¬øCu√°ndo hacer el primer topping?",
                    answers: ["Cuando tenga 2 nudos", "Cuando tenga 4-6 nudos", "En floraci√≥n", "Nunca en autos"],
                    correct: 1,
                    explanation: "El primer topping se hace cuando la planta tiene 4-6 nudos, cortando por encima del 3er o 4to nudo. Nunca en autos a menos que sean muy vigorosas."
                },
                {
                    question: "¬øQu√© es el DLI (Daily Light Integral)?",
                    answers: ["Horas de luz por d√≠a", "Cantidad total de luz recibida en 24h", "Tipo de espectro lum√≠nico", "Temperatura de color"],
                    correct: 1,
                    explanation: "DLI mide la cantidad total de luz fotosint√©ticamente activa que recibe la planta en 24 horas. Es clave para optimizar crecimiento."
                },
                {
                    question: "¬øCu√°l es el ratio NPK ideal en floraci√≥n?",
                    answers: ["Alto N, bajo P-K", "Bajo N, alto P-K", "NPK equilibrado", "Solo P y K"],
                    correct: 1,
                    explanation: "En floraci√≥n se necesita bajo Nitr√≥geno y alto F√≥sforo-Potasio. Algo como 1-3-2 o 1-4-3 es ideal para desarrollo de flores."
                },
                {
                    question: "¬øQu√© es el 'stretch' en floraci√≥n?",
                    answers: ["Cuando las hojas se estiran", "Crecimiento acelerado las primeras semanas de floraci√≥n", "Problema de iluminaci√≥n", "Signo de estr√©s"],
                    correct: 1,
                    explanation: "El 'stretch' es el crecimiento vertical acelerado durante las primeras 2-3 semanas de floraci√≥n. Las plantas pueden duplicar su altura."
                },
                {
                    question: "¬øCu√°ndo hacer defoliaci√≥n en floraci√≥n?",
                    answers: ["Nunca", "D√≠a 1 de floraci√≥n", "Semana 3 y 6 aproximadamente", "Cada semana"],
                    correct: 2,
                    explanation: "La defoliaci√≥n se hace t√≠picamente en semana 3 (despu√©s del stretch) y semana 6 de floraci√≥n para mejorar penetraci√≥n lum√≠nica."
                },
                {
                    question: "¬øQu√© es el VPD y por qu√© importa?",
                    answers: ["Tipo de nutriente", "Relaci√≥n entre temperatura y humedad", "Sistema de riego", "Variedad de planta"],
                    correct: 1,
                    explanation: "VPD (Vapor Pressure Deficit) es la relaci√≥n entre temperatura y humedad que afecta la transpiraci√≥n y absorci√≥n de nutrientes."
                },
                {
                    question: "¬øCu√°l es la EC ideal en hidrop√≥nico para floraci√≥n?",
                    answers: ["0.8-1.2", "1.4-1.8", "2.0-2.5", "0.3-0.6"],
                    correct: 1,
                    explanation: "En hidrop√≥nico, la EC ideal para floraci√≥n es 1.4-1.8. M√°s alta puede causar quemaduras, m√°s baja limita el potencial."
                },
                {
                    question: "¬øQu√© hacer si aparecen bananas/hermafroditismo?",
                    answers: ["Ignorar", "Arrancar las bananas cuidadosamente", "Cortar toda la planta", "Aumentar nutrientes"],
                    correct: 1,
                    explanation: "Si aparecen pocas 'bananas', se pueden remover cuidadosamente con pinzas. Si son muchas, considera si vale la pena mantener la planta."
                },
                {
                    question: "¬øCu√°ndo empezar el flush pre-cosecha?",
                    answers: ["1 semana antes", "2-3 semanas antes", "El d√≠a de cosecha", "No es necesario"],
                    correct: 1,
                    explanation: "El flush se inicia 1-2 semanas antes de cosecha, dependiendo del medio de cultivo. En hidro 1 semana, en tierra 2 semanas suele ser suficiente."
                },
                {
                    question: "¬øQu√© es el SCROG y cu√°ndo aplicarlo?",
                    answers: ["Tipo de semilla", "Screen of Green - malla para entrenar", "Sistema de riego", "Problema de plagas"],
                    correct: 1,
                    explanation: "SCROG (Screen of Green) usa una malla para entrenar las plantas horizontalmente, maximizando la superficie de cogollos bajo la luz."
                },
                {
                    question: "¬øCu√°l es la diferencia entre tinturas y resinas?",
                    answers: ["No hay diferencia", "Las tinturas son l√≠quidas, las resinas s√≥lidas", "Las tinturas tienen m√°s THC", "Las resinas duran m√°s"],
                    correct: 1,
                    explanation: "Las tinturas son extractos l√≠quidos (generalmente en alcohol), mientras que las resinas son extractos m√°s concentrados y s√≥lidos como el hash o rosin."
                }
            ],
            avanzado: [
                {
                    question: "¬øQu√© es la t√©cnica 'Monster Cropping'?",
                    answers: ["Cultivo de plantas gigantes", "Clones tomados en floraci√≥n que revegecan", "Uso de CO2 suplementario", "Cultivo en exterior"],
                    correct: 1,
                    explanation: "Monster Cropping consiste en tomar clones de plantas en floraci√≥n temprana. Al revegetar, desarrollan m√∫ltiples puntas de crecimiento."
                },
                {
                    question: "¬øCu√°l es la concentraci√≥n ideal de CO2 en floraci√≥n?",
                    answers: ["400 ppm", "800-1000 ppm", "1200-1500 ppm", "2000+ ppm"],
                    correct: 2,
                    explanation: "La concentraci√≥n ideal de CO2 es 1200-1500 ppm durante las horas de luz. Requiere sellado del espacio y control preciso de temperatura."
                },
                {
                    question: "¬øQu√© es el breeding y cu√°l es el objetivo principal?",
                    answers: ["Reproducir plantas id√©nticas", "Crear nuevas variedades con caracter√≠sticas deseadas", "Aumentar el THC solamente", "Hacer plantas m√°s grandes"],
                    correct: 1,
                    explanation: "El breeding busca crear nuevas variedades combinando caracter√≠sticas deseadas como potencia, sabor, resistencia, tiempo de floraci√≥n, etc."
                },
                {
                    question: "¬øCu√°ndo hacer 'reverse osmosis' del agua?",
                    answers: ["Siempre", "Cuando el agua tenga >150 ppm", "Nunca", "Solo en hidrop√≥nico"],
                    correct: 1,
                    explanation: "La osmosis inversa se recomienda cuando el agua base supera 150-200 ppm, permitiendo control total sobre los nutrientes a√±adidos."
                },
                {
                    question: "¬øQu√© causa la 'luz burn' y c√≥mo identificarla?",
                    answers: ["Exceso de nutrientes", "Luz demasiado intensa/cerca", "Falta de agua", "Temperatura baja"],
                    correct: 1,
                    explanation: "Light burn se causa por luz demasiado intensa. Se identifica por hojas superiores amarillas/blancas, especialmente cerca de la fuente de luz."
                },
                {
                    question: "¬øQu√© es la t√©cnica 'main-lining' o 'manifolding'?",
                    answers: ["Sistema de riego principal", "Crear 8+ colas principales sim√©tricas", "Tipo de poda de ra√≠ces", "M√©todo de secado"],
                    correct: 1,
                    explanation: "Main-lining crea m√∫ltiples colas principales (t√≠picamente 8, 16 o 32) mediante topping y entrenamiento sistem√°tico, maximizando rendimiento."
                },
                {
                    question: "¬øCu√°l es el problema del 'nutrient lockout'?",
                    answers: ["Falta de nutrientes", "Exceso de un nutriente bloquea otros", "pH perfecto", "Problema de luz"],
                    correct: 1,
                    explanation: "Nutrient lockout ocurre cuando el exceso de ciertos nutrientes impide la absorci√≥n de otros, causando deficiencias aparentes."
                },
                {
                    question: "¬øQu√© es el 'rosin' y c√≥mo se produce?",
                    answers: ["Tipo de fertilizante", "Extracto hecho con calor y presi√≥n", "Variedad de cannabis", "Sistema hidrop√≥nico"],
                    correct: 1,
                    explanation: "Rosin es un extracto sin solventes producido aplicando calor y presi√≥n a flores o hash, creando un concentrado limpio y potente."
                },
                {
                    question: "¬øCu√°ndo usar 'beneficial bacteria' en las ra√≠ces?",
                    answers: ["Nunca", "Solo en problemas", "Desde el inicio, especialmente en org√°nico", "Solo en exterior"],
                    correct: 2,
                    explanation: "Las bacterias beneficiosas (como Bacillus, Mycorrhizae) mejoran absorci√≥n de nutrientes y protegen contra pat√≥genos desde el inicio, especialmente en cultivos org√°nicos."
                }
            ],
            experto: [
  {question: "¬øQu√© es el 'nutrient lockout' y c√≥mo se soluciona?", answers: ["Falta de nutrientes, se soluciona abonando m√°s", "Exceso de sales bloquea la absorci√≥n, se soluciona lavando y ajustando pH", "Problema de luz, se soluciona bajando la l√°mpara", "Falta de CO2, se soluciona ventilando"], correct: 1, explanation: "El lockout es causado por exceso de sales o pH fuera de rango, se soluciona lavando y corrigiendo pH."},
  {question: "¬øQu√© es el DLI y c√≥mo afecta el crecimiento?", answers: ["Cantidad total de luz √∫til recibida en 24h", "Cantidad de agua en el sustrato", "Nivel de CO2 en el ambiente", "Cantidad de nutrientes en la soluci√≥n"], correct: 0, explanation: "El DLI mide la luz √∫til diaria y es clave para la fotos√≠ntesis y el rendimiento."},
  {question: "¬øQu√© es el 'stretch' y c√≥mo se controla?", answers: ["Crecimiento acelerado en floraci√≥n, se controla con luz y entrenamiento", "Deficiencia de nitr√≥geno", "Exceso de riego", "Falta de CO2"], correct: 0, explanation: "El stretch es el crecimiento acelerado al inicio de floraci√≥n, se controla con luz y t√©cnicas como SCROG/LST."},
  {question: "¬øQu√© es el 'runoff' y por qu√© es importante medirlo?", answers: ["El agua que drena tras el riego, permite controlar EC y pH", "El agua de lluvia", "El agua evaporada", "El agua de riego inicial"], correct: 0, explanation: "El runoff es el agua que drena tras el riego, permite controlar EC y pH."},
  {question: "¬øQu√© es el 'lollipopping' y para qu√© se usa?", answers: ["Eliminar ramas bajas para concentrar energ√≠a en la parte superior", "Poda de ra√≠ces", "Cambio de maceta", "Aplicaci√≥n de CO2"], correct: 0, explanation: "El lollipopping es eliminar ramas bajas para concentrar energ√≠a en la parte superior."},
  {question: "¬øQu√© es el VPD √≥ptimo en floraci√≥n?", answers: ["0.5-0.8 kPa", "1.0-1.2 kPa", "1.5-2.0 kPa", "2.5-3.0 kPa"], correct: 1, explanation: "En floraci√≥n el VPD √≥ptimo es 1.0-1.2 kPa."},
  {question: "¬øQu√© es el 'foxtailing' en cogollos y c√≥mo evitarlo?", answers: ["Formaci√≥n de flores alargadas por estr√©s lum√≠nico o gen√©tico", "Deficiencia de f√≥sforo", "Exceso de riego", "Falta de CO2"], correct: 0, explanation: "El foxtailing es la formaci√≥n de flores alargadas, suele deberse a estr√©s lum√≠nico o gen√©tica. Se evita controlando la intensidad lum√≠nica."},
  {question: "¬øQu√© es el 'root rot' y c√≥mo se previene?", answers: ["Podredumbre de ra√≠ces, se previene con oxigenaci√≥n y control de riego", "Deficiencia de calcio", "Exceso de luz", "Falta de CO2"], correct: 0, explanation: "Root rot es podredumbre de ra√≠ces, se previene con oxigenaci√≥n y evitando exceso de riego."},
  {question: "¬øQu√© es el 'EC drift' y c√≥mo se maneja?", answers: ["Variaci√≥n de EC en el tiempo, se maneja ajustando nutrientes y controlando el drenaje", "Cambio de pH", "Falta de luz", "Exceso de CO2"], correct: 0, explanation: "El EC drift es la variaci√≥n de EC, se maneja ajustando nutrientes y controlando el drenaje."},
  {question: "¬øQu√© es el 'hermafroditismo' y c√≥mo prevenirlo?", answers: ["Plantas con flores macho y hembra, se previene evitando estr√©s y gen√©ticas estables", "Falta de nutrientes", "Exceso de riego", "Falta de luz"], correct: 0, explanation: "El hermafroditismo es la aparici√≥n de flores macho y hembra, se previene evitando estr√©s y usando buenas gen√©ticas."},
  {question: "¬øQu√© es el 'supercropping' y para qu√© sirve?", answers: ["Da√±ar tallos para fortalecerlos y aumentar producci√≥n", "Poda de ra√≠ces", "Uso de CO2", "Cambio de maceta"], correct: 0, explanation: "El supercropping es una t√©cnica de estr√©s controlado para mejorar la producci√≥n."},
  {question: "¬øQu√© es el 'main-lining' y su objetivo?", answers: ["Crear m√∫ltiples colas principales mediante poda y entrenamiento", "Aumentar la EC", "Reducir la luz", "Controlar plagas"], correct: 0, explanation: "El main-lining crea varias colas principales para maximizar el rendimiento."},
  {question: "¬øQu√© es el 'Monster Cropping'?", answers: ["Clones tomados en floraci√≥n que revegecan", "Uso de CO2", "Cultivo en exterior", "Poda de ra√≠ces"], correct: 0, explanation: "Monster Cropping consiste en tomar clones de plantas en floraci√≥n temprana."},
  {question: "¬øQu√© es el 'breeding' y su objetivo?", answers: ["Crear nuevas variedades con caracter√≠sticas deseadas", "Aumentar el THC solamente", "Hacer plantas m√°s grandes", "Reproducir plantas id√©nticas"], correct: 0, explanation: "El breeding busca crear nuevas variedades combinando caracter√≠sticas deseadas."},
  {question: "¬øQu√© es el 'flush' y cu√°ndo se realiza?", answers: ["Lavado de ra√≠ces antes de cosecha", "Poda de ra√≠ces", "Cambio de maceta", "Aplicaci√≥n de CO2"], correct: 0, explanation: "El flush elimina sales y mejora el sabor de la cosecha."},
  {question: "¬øQu√© es el 'rosin' y c√≥mo se produce?", answers: ["Extracto hecho con calor y presi√≥n", "Tipo de fertilizante", "Variedad de cannabis", "Sistema hidrop√≥nico"], correct: 0, explanation: "Rosin es un extracto sin solventes producido aplicando calor y presi√≥n."},
  {question: "¬øQu√© es el 'luz burn' y c√≥mo se identifica?", answers: ["Hojas superiores amarillas/blancas por luz intensa", "Falta de riego", "Exceso de CO2", "Deficiencia de calcio"], correct: 0, explanation: "El light burn se identifica por hojas superiores amarillas/blancas, especialmente cerca de la fuente de luz."},
  {question: "¬øQu√© es el 'lockout' y c√≥mo se soluciona?", answers: ["Bloqueo de nutrientes por exceso de sales o pH fuera de rango, se soluciona lavando y corrigiendo pH", "Falta de luz", "Exceso de CO2", "Cambio de maceta"], correct: 0, explanation: "El lockout es causado por exceso de sales o pH fuera de rango, se soluciona lavando y corrigiendo pH."},
  {question: "¬øQu√© es el 'CO2 enrichment' y cu√°ndo es √∫til?", answers: ["Aumentar CO2 en floraci√≥n para mayor producci√≥n", "Reducir la luz", "Controlar plagas", "Aumentar la EC"], correct: 0, explanation: "El enriquecimiento de CO2 es √∫til en floraci√≥n para aumentar la producci√≥n."},
  {question: "¬øQu√© es el 'defoliation' y su objetivo?", answers: ["Eliminar hojas para mejorar penetraci√≥n de luz y ventilaci√≥n", "Aumentar la EC", "Reducir la luz", "Controlar plagas"], correct: 0, explanation: "La defoliaci√≥n mejora la penetraci√≥n de luz y la ventilaci√≥n en el cultivo."}
],
        };

        // Estado del quiz
        let currentQuiz = null;
        let currentQuestions = [];
        let currentIndex = 0;
        let userAnswers = [];
        let score = 0;

        // Elementos del DOM
        const quizSelection = document.getElementById('quizSelection');
        const quizContainer = document.getElementById('quizContainer');
        const questionCounter = document.getElementById('questionCounter');
        const questionEl = document.getElementById('question');
        const answersEl = document.getElementById('answers');
        const explanationEl = document.getElementById('explanation');
        const progressBar = document.getElementById('progressBar');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const resultsEl = document.getElementById('results');
        const scoreCircle = document.getElementById('scoreCircle');
        const scoreText = document.getElementById('scoreText');
        const resultTitle = document.getElementById('resultTitle');
        const resultDescription = document.getElementById('resultDescription');
        const recommendations = document.getElementById('recommendations');

        function startQuiz(level) {
            currentQuiz = level;
            currentQuestions = quizData[level];
            currentIndex = 0;
            userAnswers = [];
            score = 0;
            quizSelection.style.display = 'none';
            quizContainer.style.display = 'block';
            resultsEl.style.display = 'none';
            renderQuestion();
        }

        function renderQuestion() {
            const q = currentQuestions[currentIndex];
            questionCounter.textContent = `Pregunta ${currentIndex + 1} de ${currentQuestions.length}`;
            questionEl.textContent = q.question;
            answersEl.innerHTML = '';
            explanationEl.style.display = 'none';
            progressBar.style.width = `${((currentIndex + 1) / currentQuestions.length) * 100}%`;
            q.answers.forEach((ans, i) => {
                const btn = document.createElement('button');
                btn.className = 'answer';
                btn.textContent = ans;
                btn.onclick = () => selectAnswer(i);
                if (userAnswers[currentIndex] !== undefined) {
                    btn.disabled = true;
                    if (i === q.correct) btn.classList.add('correct');
                    if (i === userAnswers[currentIndex] && i !== q.correct) btn.classList.add('incorrect');
                }
                answersEl.appendChild(btn);
            });
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = userAnswers[currentIndex] === undefined;
        }

        function selectAnswer(i) {
            if (userAnswers[currentIndex] !== undefined) return;
            userAnswers[currentIndex] = i;
            const q = currentQuestions[currentIndex];
            if (i === q.correct) score++;
            renderQuestion();
            explanationEl.textContent = q.explanation;
            explanationEl.style.display = 'block';
            nextBtn.disabled = false;
        }

        function nextQuestion() {
            if (currentIndex < currentQuestions.length - 1) {
                currentIndex++;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentIndex > 0) {
                currentIndex--;
                renderQuestion();
            }
        }

        function showResults() {
            quizContainer.style.display = 'none';
            resultsEl.style.display = 'block';
            let percent = Math.round((score / currentQuestions.length) * 100);
            scoreText.textContent = `${score} / ${currentQuestions.length}`;
            if (percent >= 90) {
                scoreCircle.className = 'score-circle score-excellent';
                resultTitle.textContent = '¬°Excelente!';
                resultDescription.textContent = '¬°Eres un maestro del cultivo indoor!';
            } else if (percent >= 70) {
                scoreCircle.className = 'score-circle score-good';
                resultTitle.textContent = '¬°Muy bien!';
                resultDescription.textContent = 'Tienes muy buenos conocimientos, sigue perfeccionando tu t√©cnica.';
            } else if (percent >= 50) {
                scoreCircle.className = 'score-circle score-average';
                resultTitle.textContent = '¬°Bien!';
                resultDescription.textContent = 'Tienes una buena base, pero puedes mejorar.';
            } else {
                scoreCircle.className = 'score-circle score-poor';
                resultTitle.textContent = '¬°√Ånimo!';
                resultDescription.textContent = 'Sigue estudiando y practicando para mejorar tus resultados.';
            }
            recommendations.innerHTML = '<h3>Recomendaciones:</h3><ul><li>Revisa las gu√≠as de la Wiki para reforzar tus conocimientos.</li><li>Practica con diferentes escenarios de cultivo.</li><li>Consulta foros y comunidades para aprender de otros cultivadores.</li></ul>';

            // L√≥gica para compartir en redes sociales
            const quizUrl = window.location.href.split('#')[0];
            const shareText = `¬°He sacado ${score} de ${currentQuestions.length} en el Quiz de Cultivo Indoor de GrowCalculator! üå±\n¬øTe atreves a superarme?`;
            document.getElementById('shareTwitter').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(quizUrl)}`;
            document.getElementById('shareFacebook').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(quizUrl)}&quote=${encodeURIComponent(shareText)}`;
            document.getElementById('shareWhatsapp').href = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + quizUrl)}`;
        }

        function backToSelection() {
            quizSelection.style.display = 'grid';
            quizContainer.style.display = 'none';
            resultsEl.style.display = 'none';
        }

        function restartQuiz() {
            startQuiz(currentQuiz);
        }
    </script>
</body>
</html>