<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla VPD y Parámetros Ambientales</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="grow_theme.css">

    <!-- Google Translate Script -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'es',
                includedLanguages: 'en,fr,de,it,pt,ru,ja,ko,zh-CN,ar',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false,
                gaTrack: true,
                gaId: 'G-LLRTFTH5W6',
                multilanguagePage: true,
                gaTrack: true
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- Additional Translate Functionality -->
    <script>
        // Debug function to check if Google Translate is loading
        function checkGoogleTranslate() {
            console.log('Checking Google Translate...');
            const translateElement = document.getElementById('google_translate_element');
            if (translateElement) {
                console.log('Translate element found:', translateElement);
                console.log('Translate element content:', translateElement.innerHTML);
            } else {
                console.log('Translate element NOT found');
            }
            
            // Check if Google Translate script is loaded
            if (typeof google !== 'undefined' && google.translate) {
                console.log('Google Translate API loaded successfully');
            } else {
                console.log('Google Translate API NOT loaded');
            }
        }
        
        // Enhanced translation functionality
        function enhanceTranslation() {
            // Wait for Google Translate to be fully loaded
            setTimeout(() => {
                const translateElement = document.querySelector('.goog-te-gadget');
                if (translateElement) {
                    // Add custom styling to make it more visible
                    translateElement.style.display = 'inline-block';
                    translateElement.style.margin = '0 auto';
                    
                    // Ensure the widget is properly centered
                    const widget = document.getElementById('google_translate_element');
                    if (widget) {
                        widget.style.textAlign = 'center';
                        widget.style.display = 'block';
                    }
                    
                    console.log('Google Translate widget enhanced and ready');
                }
            }, 2000);
        }
        
        // Function to ensure all content is translatable
        function ensureTranslatableContent() {
            // Add translate attributes to dynamic content
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1) { // Element node
                                // Ensure new content is translatable
                                if (!node.hasAttribute('translate')) {
                                    node.setAttribute('translate', 'yes');
                                }
                                
                                // Check child elements
                                const elements = node.querySelectorAll('*');
                                elements.forEach(function(element) {
                                    if (!element.hasAttribute('translate')) {
                                        element.setAttribute('translate', 'yes');
                                    }
                                });
                            }
                        });
                    }
                });
            });

            // Start observing
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });

            console.log('Translation observer started - all content will be translatable');
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, checking Google Translate...');
            setTimeout(checkGoogleTranslate, 1000);
            enhanceTranslation();
        });
        
        // Check again after a longer delay
        setTimeout(checkGoogleTranslate, 3000);
        
        // Start the translation observer
        setTimeout(ensureTranslatableContent, 3000);
    </script>

</head>
<body>
    <div id="theme-toggle-btn" class="theme-toggle-btn">
        <span class="theme-icon">🎨</span>
    </div>
    <div class="container">
        <header>
            <img src="./logo_large.png" alt="Grow Calculator App Logo" class="logo-large">
            <h1>Tabla VPD y Parámetros Ambientales</h1>

            <!-- Google Translate Widget -->
            <div id="google_translate_element" class="translate-widget"></div>

        </header>

        <nav class="navigation">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Volver al Índice</a>
                </li>
                <li class="nav-item">
                    <a href="temperatura_humedad.html" class="nav-link">Anterior: Temperatura y Humedad</a>
                </li>
                <li class="nav-item">
                    <a href="guia_profesional.html" class="nav-link">Siguiente: Guía Profesional</a>
                </li>
            </ul>
        </nav>

        <div class="table-of-contents">
            <details>
                <summary>Índice</summary>
                <div class="toc-content">
                    <!-- El índice se generará dinámicamente basado en los h2 y h3 del contenido -->
                </div>
            </details>
        </div>

        <div class="content">
            <h2>Parámetros Clave por Etapa de Cultivo</h2>
            <p>El cultivo profesional requiere un control ambiental preciso para maximizar rendimientos y calidad. A continuación, se detallan los parámetros óptimos para cada fase:</p>

            <h3>Propagación (Esquejes/Semillas)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura: 22-24°C</li>
                    <li>Humedad: 75-85% HR</li>
                    <li>VPD: 0.4-0.6 kPa</li>
                    <li>Técnica específica: Domos de propagación con calentamiento de sustrato (24-26°C)</li>
                </ul>
            </div>

            <h3>Vegetativo Temprano (Semanas 1-2)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 24-26°C</li>
                    <li>Temperatura nocturna: 20-22°C</li>
                    <li>Humedad: 65-70% HR</li>
                    <li>VPD: 0.7-0.9 kPa</li>
                    <li>PPFD recomendado: 300-500 μmol/m²/s</li>
                </ul>
            </div>

            <h3>Vegetativo Medio (Semanas 3-4)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 25-27°C</li>
                    <li>Temperatura nocturna: 19-21°C</li>
                    <li>Humedad: 60-65% HR</li>
                    <li>VPD: 0.9-1.1 kPa</li>
                    <li>PPFD recomendado: 500-700 μmol/m²/s</li>
                </ul>
            </div>

            <h3>Vegetativo Tardío (Semana 5+)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 26-28°C</li>
                    <li>Temperatura nocturna: 18-20°C</li>
                    <li>Humedad: 55-60% HR</li>
                    <li>VPD: 1.1-1.3 kPa</li>
                </ul>
            </div>

            <h3>Floración Temprana (Semanas 1-3)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 24-25°C</li>
                    <li>Temperatura nocturna: 17-19°C</li>
                    <li>Humedad: 45-50% HR</li>
                    <li>VPD: 1.3-1.5 kPa</li>
                    <li>PPFD recomendado: 800-1000 μmol/m²/s</li>
                </ul>
            </div>

            <h3>Floración Media (Semanas 4-6)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 23-24°C</li>
                    <li>Temperatura nocturna: 16-18°C</li>
                    <li>Humedad: 40-45% HR</li>
                    <li>VPD: 1.4-1.6 kPa</li>
                </ul>
            </div>

            <h3>Floración Tardía (Semanas 7-9)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 22-23°C</li>
                    <li>Temperatura nocturna: 15-17°C</li>
                    <li>Humedad: 35-40% HR</li>
                    <li>VPD: 1.5-1.7 kPa</li>
                </ul>
                <div class="warning-box">
                    <p>Precaución: Mantener HR nocturna <45% para prevenir botrytis</p>
                </div>
            </div>

            <h3>Maduración (Últimas 1-2 semanas)</h3>
            <div class="info-box">
                <ul>
                    <li>Temperatura diurna: 21-22°C</li>
                    <li>Temperatura nocturna: 14-16°C</li>
                    <li>Humedad: 30-35% HR</li>
                    <li>VPD: 1.6-1.8 kPa</li>
                </ul>
            </div>

            <h2>Tabla de Referencia VPD</h2>
            
            <h3>Fase Vegetativa (Valores VPD en kPa)</h3>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Temperatura (°C)</th>
                        <th>40% HR</th>
                        <th>45% HR</th>
                        <th>50% HR</th>
                        <th>55% HR</th>
                        <th>60% HR</th>
                        <th>65% HR</th>
                        <th>70% HR</th>
                        <th>75% HR</th>
                    </tr>
                    <tr>
                        <td>20°C</td>
                        <td>1.40</td>
                        <td>1.28</td>
                        <td>1.17</td>
                        <td>1.05</td>
                        <td>0.94</td>
                        <td>0.82</td>
                        <td>0.70</td>
                        <td>0.59</td>
                    </tr>
                    <tr>
                        <td>22°C</td>
                        <td>1.56</td>
                        <td>1.43</td>
                        <td>1.30</td>
                        <td>1.17</td>
                        <td>1.04</td>
                        <td>0.91</td>
                        <td>0.78</td>
                        <td>0.65</td>
                    </tr>
                    <tr>
                        <td>24°C</td>
                        <td>1.74</td>
                        <td>1.59</td>
                        <td>1.45</td>
                        <td>1.30</td>
                        <td>1.16</td>
                        <td>1.01</td>
                        <td>0.87</td>
                        <td>0.73</td>
                    </tr>
                    <tr>
                        <td>26°C</td>
                        <td>1.93</td>
                        <td>1.77</td>
                        <td>1.61</td>
                        <td>1.45</td>
                        <td>1.29</td>
                        <td>1.13</td>
                        <td>0.97</td>
                        <td>0.81</td>
                    </tr>
                    <tr>
                        <td>28°C</td>
                        <td>2.15</td>
                        <td>1.97</td>
                        <td>1.79</td>
                        <td>1.61</td>
                        <td>1.43</td>
                        <td>1.25</td>
                        <td>1.07</td>
                        <td>0.90</td>
                    </tr>
                </table>
            </div>

            <h3>Fase de Floración (Valores VPD en kPa)</h3>
            <div class="table-container">
                <table>
                    <tr>
                        <th>Temperatura (°C)</th>
                        <th>35% HR</th>
                        <th>40% HR</th>
                        <th>45% HR</th>
                        <th>50% HR</th>
                        <th>55% HR</th>
                        <th>60% HR</th>
                        <th>65% HR</th>
                    </tr>
                    <tr>
                        <td>20°C</td>
                        <td>1.51</td>
                        <td>1.40</td>
                        <td>1.28</td>
                        <td>1.17</td>
                        <td>1.05</td>
                        <td>0.94</td>
                        <td>0.82</td>
                    </tr>
                    <tr>
                        <td>22°C</td>
                        <td>1.69</td>
                        <td>1.56</td>
                        <td>1.43</td>
                        <td>1.30</td>
                        <td>1.17</td>
                        <td>1.04</td>
                        <td>0.91</td>
                    </tr>
                    <tr>
                        <td>24°C</td>
                        <td>1.88</td>
                        <td>1.74</td>
                        <td>1.59</td>
                        <td>1.45</td>
                        <td>1.30</td>
                        <td>1.16</td>
                        <td>1.01</td>
                    </tr>
                    <tr>
                        <td>26°C</td>
                        <td>2.09</td>
                        <td>1.93</td>
                        <td>1.77</td>
                        <td>1.61</td>
                        <td>1.45</td>
                        <td>1.29</td>
                        <td>1.13</td>
                    </tr>
                </table>
            </div>

            <h2>Interpretación de la Tabla VPD</h2>
            <div class="info-box">
                <ul>
                    <li>VPD óptimo: 0.8-1.2 kPa para vegetativo, 1.2-1.6 kPa para floración</li>
                    <li>VPD aceptable: 0.6-0.8 kPa o 1.2-1.4 kPa para vegetativo, 1.0-1.2 kPa o 1.6-1.8 kPa para floración</li>
                    <li>VPD marginal: Requiere atención</li>
                    <li>VPD fuera de rango: Condiciones estresantes para la planta</li>
                </ul>
            </div>

            <h2>Sistemas de Control Ambiental</h2>

            <h3>Equipamiento Esencial</h3>
            <div class="info-box">
                <ul>
                    <li>Sensores: Dispositivos de precisión con margen de error <±3% HR y <±0.5°C</li>
                    <li>Controladores: Sistemas con algoritmos que permitan ajustes dinámicos</li>
                    <li>Equipo HVAC: Dimensionado para el volumen total de la sala más un 20% de capacidad adicional</li>
                    <li>Circulación de aire: Ventiladores oscilantes a nivel de dosel (0.5-1.0 m/s)</li>
                </ul>
            </div>

            <h3>Estrategias para Mantener VPD Óptimo</h3>
            <div class="info-box">
                <ol>
                    <li>Control por zonas: Divida espacios grandes en zonas con control independiente</li>
                    <li>Transiciones graduales: Cambios no superiores a 5% HR o 2°C por día</li>
                    <li>Monitoreo continuo: Sistemas de alerta para desviaciones >10% de parámetros objetivo</li>
                    <li>Redundancia: Equipos de respaldo para momentos críticos (floración tardía)</li>
                </ol>
            </div>

            <h2>Adaptaciones por Genética</h2>
            <div class="info-box">
                <ul>
                    <li>Variedades índicas: Tolerar VPD ligeramente inferior (-0.1 kPa del estándar)</li>
                    <li>Variedades sativas: Prefieren VPD ligeramente superior (+0.1 kPa del estándar)</li>
                    <li>Híbridos: Ajustar según la dominancia genética</li>
                </ul>
            </div>

            <h2>Solución de Problemas Comunes</h2>

            <h3>VPD Demasiado Alto</h3>
            <div class="info-box">
                <h4>Causas:</h4>
                <ul>
                    <li>Humedad baja</li>
                    <li>Temperatura alta</li>
                    <li>Ventilación excesiva</li>
                </ul>
                <h4>Soluciones:</h4>
                <ul>
                    <li>Aumentar humidificación (nebulizadores o humidificadores)</li>
                    <li>Reducir temperatura</li>
                    <li>Verificar fugas en el sistema de ventilación</li>
                </ul>
            </div>

            <h3>VPD Demasiado Bajo</h3>
            <div class="info-box">
                <h4>Causas:</h4>
                <ul>
                    <li>Humedad alta</li>
                    <li>Temperatura baja</li>
                    <li>Ventilación insuficiente</li>
                </ul>
                <h4>Soluciones:</h4>
                <ul>
                    <li>Implementar deshumidificadores</li>
                    <li>Aumentar temperatura</li>
                    <li>Mejorar circulación de aire</li>
                </ul>
            </div>

            <h2>Uso Práctico de la Tabla VPD</h2>
            <div class="info-box">
                <ol>
                    <li>Mida temperatura y humedad en varios puntos del espacio de cultivo</li>
                    <li>Identifique el VPD correspondiente en la tabla</li>
                    <li>Compare con los valores óptimos para la etapa actual</li>
                    <li>Ajuste parámetros según sea necesario</li>
                </ol>
            </div>

            <div class="warning-box">
                <p>La optimización del VPD también optimiza la expresión de terpenos y metabolitos secundarios, reduciendo simultáneamente los riesgos de plagas y enfermedades en cultivos profesionales.</p>
            </div>

            <a href="index.html" class="back-to-index">Volver al Índice Principal</a>
        </div>
    </div>

    <script>
        // Funcionalidad del cambio de tema
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle-btn');
            const currentTheme = localStorage.getItem('theme');
            
            // Aplicar tema guardado
            if (currentTheme === 'grow') {
                document.body.classList.add('theme-grow');
            }
            
            // Cambiar tema al hacer clic
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('theme-grow');
                
                // Guardar preferencia
                if (document.body.classList.contains('theme-grow')) {
                    localStorage.setItem('theme', 'grow');
                } else {
                    localStorage.setItem('theme', 'default');
                }
            });
        });

        // Contraer todos los details por defecto
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('details').forEach(function(details) {
                details.removeAttribute('open');
            });
        });

        // Generar el índice
        document.addEventListener('DOMContentLoaded', function() {
            const content = document.querySelector('.content');
            const tocContent = document.querySelector('.table-of-contents .toc-content');
            const headings = content.querySelectorAll('h2, h3');
            
            headings.forEach((heading, index) => {
                // Añadir ID al heading
                heading.id = `section-${index}`;
                
                // Crear enlace en el índice
                const link = document.createElement('a');
                link.href = `#section-${index}`;
                link.textContent = heading.textContent;
                link.className = 'toc-link';
                
                // Añadir clase para subsecciones
                if (heading.tagName === 'H3') {
                    link.className += ' toc-sub';
                }
                
                tocContent.appendChild(link);
            });
        });
    </script>
</body>
</html>
